<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<title> gnuplot / image (E) </title>
<!-- Generated 2001/ 8/20 -->
<!-- $Id: image-e.html,v 1.11 2004/12/17 07:33:39 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=us-ascii">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index-e.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/16 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index-e.html">         HOME </a> |
<a href="intro/index-e.html">   INTRODUCTION </a> |
<a href="general-e.html">       INFORMATION </a> |
<a href="gallery/index-e.html"> GALLERY </a> |
<a href="image.html">           JAPANESE </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend-e.html">     Legend </a>
    <li><a href="tics-e.html">       Tics </a>
    <li><a href="label-e.html">      Label </a>
    <li><a href="plot1-e.html">      2-D Plot </a>
    <li><a href="plot3d-e.html">     3-D Plot </a>
    <li><a href="polar-e.html">      Polar Coordinate </a>
    <li><a href="parametric-e.html"> Parametric Functions </a>
    <li><a href="datafile-e.html">   Data File </a>
    <li><a href="postproc-e.html">   After Plotting </a>
    <ul>
      <li><a href="postproc-e.html#8.1">
           TeX document </a>
      <li><a href="postproc-e.html#8.2">
           merge several figures </a>
      <li><a href="image-e.html#8.3">
           convert into image </a>
      <li><a href="postscript-e.html#8.4">
           change colors </a>
      <li><a href="postscript-e.html#8.5">
           right-side margin </a>
    </ul>
    <li><a href="misc1-e.html">      Miscellaneous Stuff </a>
  </ul>
</td>


<td id="content">


<h1><a name="top"> After Plotting (No.2) </a></h1>

<div align="center">
<a href="postproc-e.html">   1 </a> | 
<a href="image-e.html">      2 </a> | 
<a href="postscript-e.html"> 3 </a>
</div>


<h2><a name="8.3"> How do I convert a figure into image formats like PNG ?</a></h2>


<p> An image format that gnuplot can generate directly is ppm and png.
Gnuplot ver.3.7 can make a GIF too. But the GIF file generated by
gnuplot is not compressed because of a LZW patent problem, then the
file size is usually very large. In addition GIF is no more supported
by gnuplot3.8. Main reasons of use of GIF are to put the graph into your 
Web pages. If so, you can use PNG (Portable Network Graphics) too, 
as many browsers are capable of displaying the PNG files, and usually 
the size of PNG file is smaller than GIF. </p>

<p> There are several ways of image format conversion. Here are some examples.</p>
<ul>
  <li> Display a graph on a X terminal, dump the screen window by "xwd",
      convert it into various formats with "xv", "ImageMagick", "Gimp", etc.
  <li> Make a graph in the ppm format, then convert it with "ImageMagick", "xv", 
       "pbmplus", "netpbm", "Gimp".
  <li> Make it in a PostScript format, then convert it with "GhostScript"
       (gs supports several image formats).
  <li> Make a PostScript file, display it with "GhostScript", dump the window by "xwd",
       convert it with "xv", "ImageMagick", "Gimp", etc.
</ul>
<p> Netpbm (ppmtoXXX commands) is useful for automatic conversion. The
screen dump method with xwd is probably the easiest way.</p>

<p> Firstly display something with gnuplot, then dump that window with xwd.</p>

<pre class="sample">
gnuplot&gt; set yrange [-6:6] 
gnuplot&gt; set hidden3d
gnuplot&gt; set isosample 40
gnuplot&gt; splot x*sin(y)
gnuplot&gt; shell
 % xwd &gt; screen.xwd
 % exit
exit

gnuplot&gt; 
</pre>

<p>Open this "screen.xwd" with xv, Imagemagick (display command), or Gimp, and
save it in a image format like PNG. Otherwise, with netpbm</p>
<pre class="sample">
 % xwdtopnm &lt; screen.xwd | ppmtopng &gt; screen.png
</pre>
<p>This generates PNG too. The next PNG figure was made with this technique.</p>

<div align="center"><img src="fig/sample8.3b.png" alt="fig/sample8.3b" width="530" height="350"></div>


<p> With GhostScript you have to check what image formats your gs supports first.
This can be done with the <tt>--help</tt> option of gs.</p>

<pre class="sample">
 % gs -help
 GNU Ghostscript 5.10 (1998-12-17)
 Copyright (C) 1997 Aladdin Enterprises, Menlo Park, CA.  All rights reserved.
 Usage: gs [switches] [file1.ps file2.ps ...]
 Most frequently used switches: (you can use # in place of =)
  -dNOPAUSE           no pause after page   | -q       `quiet', fewer messages
  -g&lt;width&gt;x&lt;height&gt;  page size in pixels   | -r&lt;res&gt;  pixels/inch resolution
  -sDEVICE=&lt;devname&gt;  select device         | -dBATCH  exit after last file
  -sOutputFile=&lt;file&gt; select output file: - for stdout, |command for pipe,
                                          embed %d or %ld for page #
 Input formats: PostScript PostScriptLevel1 PostScriptLevel2 PDF
 Available devices:
    x11 x11alpha x11cmyk x11gray2 x11mono ml600 npdl epag escpage lbp310
    lbp320 lips2p lips3 lips4 lips4c lips4v lips4vc fmpr mjc180 mjc360 mjc720
    mj500c pr150 jj100 bj10v bj10vh md5000 dmprt deskjet djet500 laserjet
 .....
</pre>

<p> Here is an explanation how to convert a PS file into jpeg with gs.
First, you make an EPS file with gnuplot, then convert it with gs. </p> 

<pre class="sample">
 % gs -dNOPAUSE -sDEVICE=jpeg -sOutputFile=test.jpg -q
   -dBATCH -g500x350 test.eps
</pre>

<p> The command above should not be folded but in one-line.
The <tt>-sOutputFile</tt> specifies the output file name. When
<tt>-sOutputFile=- </tt>, the output goes to STDOUT. The <tt> -g </tt>
option means the pixel size of image, which depends on the figure size
in the EPS file. </p>

<p> The JPEG format, as shown below, is mainly used for a photo image,
and it is not suitable for images which have strong contrast at borders.
To show a graph in a image format, GIF and PNG are better than JPEG </p>

<div align="center"><table border="0">
<tr><td align="center"><img src="fig/sample8.3c.png" alt="fig/sample8.3c" width="563" height="430"></td></tr>
<tr><td align="center"> EPS by gnuplot, displayed with gv </td></tr>
<tr><td align="center"><img src="fig/sample8.3d.jpg" alt="fig/sample8.3d" width="500" height="350"></td></tr>
<tr><td align="center"> convert into jpeg with gs </td></tr>
</table></div>

<div class="top"><a href="image-e.html#top"><img src="image/mark-up.png" alt="up"></a></div>
</td></tr></table>
<hr class="topsep">

</body>
</html>

