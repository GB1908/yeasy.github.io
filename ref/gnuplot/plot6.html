<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / plot (6) </title>
<!-- Generated 2003/ 2/17 -->
<!-- $Id: plot6.html,v 1.7 2004/12/19 09:23:44 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/5 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index.html">           HOME </a> |
<a href="intro/index.html">     INTRODUCTION </a> |
<a href="general.html">         INFORMATION </a> |
<a href="gallery/index.html">   GALLERY </a> |
<a href="plot6-e.html">         ENGLISH </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend.html">      凡例(Legend) </a>
    <li><a href="tics.html">        目盛(Tics) </a>
    <li><a href="label.html">       ラベル(Label) </a>
    <li><a href="plot1.html">       2次元プロット </a>
    <ul>
      <li><a href="plot1.html#5.1">
           一定の大きさ </a>
      <li><a href="plot1.html#5.2">
           左右両方のY軸 </a>
      <li><a href="plot1.html#5.3">
           軸を消す </a>
      <li><a href="plot1.html#5.4">
           縦横比の固定された図 </a>
      <li><a href="plot2.html#5.5">
           ゼロ軸 </a>
      <li><a href="plot2.html#5.6">
           誤差棒の横線 </a>
      <li><a href="plot2.html#5.7">
           文字を大きく</a>
      <li><a href="plot2.html#5.8">
           曲線で補間</a>
      <li><a href="plot2.html#5.9">
           枠線上データ点を消す </a>
      <li><a href="plot3.html#5.10">
           複数のグラフ </a>
      <li><a href="plot3.html#5.11">
           格子 </a>
      <li><a href="plot4.html#5.12">
           複数の軸 </a>
      <li><a href="plot4.html#5.13">
           任意の格子 </a>
      <li><a href="plot5.html#5.14">
           図中の図 </a>
      <li><a href="plot5.html#5.15">
           棒グラフ </a>
      <li><a href="plot6.html#5.16">
           2つの図を並べる．</a>
      <li><a href="plot7.html#5.17">
           正規確率軸 </a>
      <li><a href="plot7.html#5.18">
           データ値を印刷 </a>
    </ul>
    <li><a href="plot3d.html">      3次元プロット </a>
    <li><a href="polar.html">       極座標プロット </a>
    <li><a href="parametric.html">  媒介変数表示 </a>
    <li><a href="datafile.html">    データファイルの数値 </a>
    <li><a href="postproc.html">    図を描いたその後は</a>
    <li><a href="misc1.html">       その他 </a>
  </ul>
 <br>
</td>


<td id="content">


<h1><a name="top"> 2次元プロットのあれこれ (その6) </a></h1>

<div align="center">
<a href="plot1.html"> 1 </a> | 
<a href="plot2.html"> 2 </a> | 
<a href="plot3.html"> 3 </a> | 
<a href="plot4.html"> 4 </a> | 
<a href="plot5.html"> 5 </a> | 
<a href="plot6.html"> 6 </a> | 
<a href="plot7.html"> 7 </a>
</div>

<h2><a name="5.16">表示方法の異なる2つの図を横または縦に並べる．</a></h2>

<p> 同じデータの図を，表示方法を変えて，横または縦に並べる方法を紹介します．
次のような場合に，このような表示が役に立ちます．</p>
<ul>
 <li> <a href="plot6.html#side"> 同じデータを表示スケールを変えて横に並べる．</a>
    <ul>
      <li> Xのある特定の範囲を引き伸ばして表示したいとき．例えば，Xの値
            が小さい部分だけを対数表示して拡大し，横に並べて1枚の図とす
            る．
    </ul>
 <li> <a href="plot6.html#atop"> 2つの似通ったデータを絶対値と比で比較する．</a>
    <ul>
       <li> Y値が非常に接近した2つのデータを重ねてプロットすると，2つの
            グラフは重なってしまい判別ができなくなります．2つのデータが
            非常に似ているという事を示したいだけなら，重なってしまうのは，
            さほど悪いことではありません．ただ，どの程度重なっているのか
            を定量的に示したいのなら，それらの比をとり，ratio=1からどれ
            だけ離れているかを表示すると良いです．ここでは，１つの図を上
            下に分け，上半分に2つのデータを絶対値で表示し，下部にそれら
            の比をプロットします．
    </ul>
</ul>


<hr width="50%">

<div class="top"><a href="plot6.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="side">同じデータを表示スケールを変えて横に並べる．</a></h2>

<img src="fig/sample5.16a.png" alt="fig/sample5.16a" width="400" height="300" align="left">

<p> 左のようなデータがあるとします．ここでの表示範囲は，[0:30]となってい
     ますが，Xが0に近い場所に意味があり，ここをより詳細に見せたい場合が
     あります．2つの図を異なるスケールで描けば良いのですが，これを1つの
     図にまとめる方法を考えます．まず，Xが1以下の領域を対数表示します．</p>
<br clear="all">

<pre class="sample">
gnuplot&gt; set log xy
gnuplot&gt; set xrange [ 0.001 : 1 ]
gnuplot&gt; set yrange [ 0.1 : 5000 ]
gnuplot&gt; set xlabel "Energy [eV]"
</pre>

<p> Xが[1:30]の領域はlinear scaleで表示し，1以下の対数表示の図の横に
     <tt>multiplot</tt>を使って並べます．左右の図をぴったりとくっつける
     ために，左側では<tt>rmargin</tt>をゼロにし，右の図では
     <tt>lmargin</tt>をゼロにします．2つの図の横幅を半分にしておき，
     <tt>set origin</tt>を用いて右の図を0.5だけ右に移動します．</p>

<p> 左側の図にはY目盛を入れるため，<tt> set lmargin 10 </tt>としてY軸の
     数字を書く10文字分の領域を確保していますが，右側の図には数字を入れ
     ないので<tt>lmargin</tt>をゼロにします．また<a href="tics.html#3.4">
     数字を消す</a>ために<tt> set format ""</tt>を指定します．</p>

<pre class="sample">
gnuplot&gt; set multiplot
multiplot&gt; set size 0.5,1
multiplot&gt; set origin 0.0,0.0
multiplot&gt; set lmargin 10
multiplot&gt; set rmargin 0
multiplot&gt; plot "calc.dat" u 1:2 w l
multiplot&gt; set origin 0.5,0.0
multiplot&gt; set format y ""
multiplot&gt; set lmargin 0
multiplot&gt; set rmargin 2
multiplot&gt; set nolog x
multiplot&gt; set xrange [1:30]
multiplot&gt; set xtic 0,10
multiplot&gt; set mxtic 5
multiplot&gt; plot "calc.dat" u 1:2 w l
multiplot&gt; set nomultiplot
gnuplot&gt;
</pre>

<img src="fig/sample5.16b.png" alt="fig/sample5.16b" width="400" height="300" align="left">

<p> 左側と右側のスケールが違うことを明確にするために，X軸にはminor tics 
     をいれておくべきです．また，繋ぎ目でのXの目盛の数値が重なってしまわ
     ないように，右の図では<tt>set xtics 0,10</tt>(初期値0，増分10)とし
     てX=1のところに目盛が入らないようにしました．</p>

<p> 実は，このデータはXが小さい場合にlog-logで直線になることが分かってい
     ます．上の図と比較するとわかるように，表示領域を2つにわけることで，
     このようなデータの特徴を端的に表現することが可能になります．</p>
<br clear="all">

<p> この例ではX軸名が2つ表示されますが，2つの図の真中近辺に1つだけ表示さ
     せることもできます．左の図では <tt> set xlabel ""</tt>のように軸名
     を消しておき，右側の軸名を<tt> set xlabel "Energy [eV]" -20,0</tt>
     のように左にずらします．この時，両方の図で，<tt> set bmargin 5</tt>
     のように下部のマージンを明示しておかないと，軸名を消した方の図の縦
     の長さが変わってしまいます．</p>


<hr width="50%">
<div class="top"><a href="plot6.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="atop">2つの似通ったデータを絶対値と比で比較する．</a></h2>

<p> 非常に似通った2つのデータを比較検討するには，絶対値での比較の他にそ
     れらの比を取ったものをプロットするのが効果的です．同じX座標でのY値
     の比なので，今度は上下に図を重ねてみます．絶対値での比較は対数表示，
     比は通常の目盛を使います．</p>

<p> 2つのデータのX座標を揃えておかないと，比を計算することはできませんの
     で，データファイルには，1カラム目にX座標，2カラムが最初のデータのY
     座標，3カラム目が2番目のデータのY座標が入っているものとします．</p>

<p> 最初に設定するのは，上下の図に共通なX軸関係のパラメータです．ここで
     は，[0.01:30]の範囲を対数表示を用いてプロットします．上下の図の大き
     さをそろえるために，leftとrightのマージンを明示しています．</p>

<pre class="sample">
gnuplot&gt; set xrange [ 0.01 : 30 ]
gnuplot&gt; set nokey
gnuplot&gt; set log x
gnuplot&gt; set xtics 10
gnuplot&gt; set mxtics 10
gnuplot&gt; set lmargin 10
gnuplot&gt; set rmargin 2
</pre>

<p> まず下側の図を作ります．下には2つのデータの比をとったものを，縦サイ
     ズを0.4に縮小して表示します．Y軸の範囲は0.5から1.5とし，目盛は0.6か
     ら0.2刻みで1.4まで入れます．X軸名は下の図に入れるので，<tt> set
     bmargin </tt>で軸名のスペースを確保します．また，上の図と接触させる
     ために，<tt> set tmargin 0 </tt>で上部の余白を無くします．2つのデー
     タは2,3カラムにあるので，その比をプロットするには<tt> plot
     1:($2/$3)</tt> となります．Y=1を入れておくと，比のデータはより読み
     やすくなります．</p>

<pre class="sample">
gnuplot&gt; set multiplot
multiplot&gt; set yrange [ 0.5 : 1.5 ]
multiplot&gt; set ytic 0.6,0.2,1.4
multiplot&gt; set ylabel "Ratio"
multiplot&gt; set size 1,0.4
multiplot&gt; set xlabel "Energy [eV]"
multiplot&gt; set origin 0.0,0.0
multiplot&gt; set bmargin 3
multiplot&gt; set tmargin 0
multiplot&gt; plot 1 w l 0,"cross.dat" u 1:($2/$3) w l 1
</pre>

<p> 次に上半分を作ります．下と同様にサイズを縮小した後，下の図の左上に移
     動に原点を移動します．上側では，2つのデータを絶対値の対数で表示して
     います．<tt>set bmargin 0</tt>で下の図と接触させます．その時，X軸名
     や数字は消しておく必要があります．</p>

<pre class="sample">
multiplot&gt; set log xy
multiplot&gt; set yrange [ 0.1 : 5000 ]
multiplot&gt; set ytic 0.1,10
multiplot&gt; set ylabel "Cross Section [b]"
multiplot&gt; set size 1,0.6
multiplot&gt; set origin 0.0,0.4
multiplot&gt; set bmargin 0
multiplot&gt; set tmargin 1
multiplot&gt; set format x ""
multiplot&gt; set xlabel ""
multiplot&gt; plot "cross.dat" u 1:2 w l,"" u 1:3 w l
multiplot&gt; set nomultiplot
gnuplot&gt; 
</pre>

<img src="fig/sample5.16c.png" alt="fig/sample5.16c" width="400" height="300" align="left">

<p> ここでは凡例を消していますので，比のデータがA/Bなのか，B/Aなのかはす
     ぐには分かりません．必要があります．上半分の図を見れば，赤い線が緑
     線より低いので，下のratioは赤/緑であることは明らかですが，やはりこ
     れはcaption中に明記する必要があります．</p>

<p> EPSに出力した<a href="gallery/twofig.html">完成品</a>がGalleryにあります．</p>

<br clear="all">
<div class="top"><a href="plot6.html#top"><img src="image/mark-up.png" alt="up"></a></div>

</td></tr></table>
<hr class="topsep">


</body>
</html>

