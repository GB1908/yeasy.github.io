<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / datafile (1)</title>
<!-- Generated 1999/ 7/21 -->
<!-- $Id: datafile.html,v 1.13 2004/12/21 06:51:55 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/5 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index.html">           HOME </a> |
<a href="intro/index.html">     INTRODUCTION </a> |
<a href="general.html">         INFORMATION </a> |
<a href="gallery/index.html">   GALLERY </a> |
<a href="datafile-e.html">      ENGLISH </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend.html">      凡例(Legend) </a>
    <li><a href="tics.html">        目盛(Tics) </a>
    <li><a href="label.html">       ラベル(Label) </a>
    <li><a href="plot1.html">       2次元プロット </a>
    <li><a href="plot3d.html">      3次元プロット </a>
    <li><a href="polar.html">       極座標プロット </a>
    <li><a href="parametric.html">  媒介変数表示 </a>
    <li><a href="datafile.html">    データファイルの数値 </a>
    <ul>
      <li><a href="datafile.html#7.1">
           データフォーマット </a>
      <li><a href="datafile2.html#7.2">
           複数のデータをプロット</a>
      <li><a href="datafile2.html#7.3">
           数値の修正 </a>
      <li><a href="datafile2.html#7.4">
           データとコマンドの共存 </a>
      <li><a href="datafile2.html#7.5">
           データをスキップ </a>
      <li><a href="datafile2.html#7.6">
           一部をプロット</a>
      <li><a href="datafile3.html#7.7">
           UNIXのコマンド </a>
      <li><a href="datetime.html">
           日付/時間型データ </a>
    </ul>
    <li><a href="postproc.html">    図を描いたその後は</a>
    <li><a href="misc1.html">       その他 </a>
  </ul>
 <br>
</td>


<td id="content">


<h1><a name="top"> データファイルの数値のプロット (その1)</a></h1>

<div align="center">
<a href="datafile.html">  1 </a> | 
<a href="datafile2.html"> 2 </a> | 
<a href="datafile3.html"> 3 </a> |
<a href="datetime.html">  4 </a>
</div>


<p> 何かの計算や実験を行い，その結果をグラフにするのが，
理系の研究者にとって最も多いgnuplotの使われ方ではないでしょうか．
結果のデータをプロットして全体を眺め，結果が良さそうだったらポストスクリプト
にして印刷したり，EPSにしてTeXで書かれた論文に貼り込んだり．．．．</p>



<h2><a name="7.1">プロットできるデータのフォーマットは？ </a></h2>
<ul>
  <li> <a href="datafile.html#2dim">   2次元のデータ</a>
  <li> <a href="datafile.html#3dim">   3次元のデータ</a>
  <li> <a href="datafile.html#matrix"> マトリックス</a>
</ul>

<h3><a name="2dim">2次元のデータ</a></h3>

<p> わざわざ書くまでも無い話しですが，一応ここにまとめておくこと
にします．数値データは，空白(スペースもしくはタブ)で区切られた
カラムにします．行の先頭に#があると，その行は無視されます．
実はgnuplotは，データがどのように書かれていても，読み込みの書式
を指定することでデータを読めるのですが，ここではこの方法は
取り上げません．</p>


<pre class="file">
#  X     Y   
   1.0   1.2 
   2.0   1.8 
   3.0   1.6 
</pre>

<p>例えば2次元データの場合は，上の様にX座標とY座標を並べて書きます．X
やYに誤差棒を付けたければ，さらにそれらのカラムを並べて書きます．プロッ
トする時にどの数値を使うかを指定するので，カラムの順序はどうなっていて
もかまいません．1カラム目をX座標，2カラム目をY座標にしたときは</p>

<pre class="sample">
gnuplot&gt; plot "test.dat" using 1:2
</pre>

<p>のように，usingを使ってgnuplotに描くカラムを教えます．usingを使わない
と，自動的に1カラム目をX，2カラム目をYにしてプロットします．</p>


<p>Y座標に誤差棒を付ける方法は2つあります．1つは Y±Z のようにYを
中心に上下にZの棒を付ける場合．もう一つは Yの範囲[Z1,Z2]が決まっている
場合のように上下の棒の長さが異なる場合です．前者のデータファイル
には3カラムの数値，後者なら4カラム必要です．</p>

<pre class="file">
#  X     Y     Z 
   1.0   1.2   0.2
   2.0   1.8   0.3
   3.0   1.6   0.2
</pre>

<div align="center"><img src="fig/sample7.1a.png" alt="fig/sample7.1a" width="297" height="224"></div>

<pre class="file">
#  X     Y     Z1    Z2
   1.0   1.2   0.8   1.5
   2.0   1.8   0.3   2.3
   3.0   1.6   1.0   2.1
</pre>
<div align="center"><img src="fig/sample7.1b.png" alt="fig/sample7.1b" width="300" height="223"></div>

<p>それぞれをプロットするときは，</p>

<pre class="sample">
gnuplot&gt; plot "test.dat" using 1:2:3 with yerrorbars
</pre>
<pre class="sample">
gnuplot&gt; plot "test.dat" using 1:2:3:4 with yerrorbars
</pre>

<p>の様に using の後の指定が変わるだけです．</p>


<p>表示するデータの形式によって，データカラム数やusingの指定が変わります．
2次元データの場合のこれらを以下にまとめます．</p>

<div align="center"><table border="1" class="incontent">
<tr><th>データ表示形式  </th><th>カラム</th><th>using  </th><th>with</th></tr>
<tr><td>(X,Y)のデータ   </td><td>X Y   </td><td>1:2    </td><td>lines, points, steps, <br>
                                                                linespoints, boxes, etc.</td></tr>
<tr><td>Yに誤差dY        </td><td>X Y dY    </td><td>1:2:3    </td><td>yerrorbars</td></tr>
<tr><td>Xに誤差dX        </td><td>X Y dX    </td><td>1:2:3    </td><td>xerrorbars</td></tr>
<tr><td>Yに誤差dY,<br>
        Xに誤差dX        </td><td>X Y dX dY </td><td>1:2:3:4  </td><td>xyerrorbars</td></tr>
<tr><td>Yの範囲[Y1,Y2]   </td><td>X Y Y1 Y2 </td><td>1:2:3:4  </td><td>yerrorbars</td></tr>
<tr><td>Xの範囲[X1,X2]   </td><td>X Y X1 X2 </td><td>1:2:3:4  </td><td>xerrorbars</td></tr>
<tr><td>Yの範囲[Y1,Y2], <br>
        Xの範囲[X1,X2]   </td><td>X Y X1 X2 Y1 Y2 </td><td>1:2:3:4:5:6  </td><td>xyerrorbars</td></tr>
</table></div>




<h3><a name="3dim">3次元のデータ</a></h3>

<p>3次元データは(X,Y,Z)の組にして与えます．デフォルトでは，3次元空間に
点を表示します．<tt>with lines</tt>のオプションで線を描くようにした場合，
データの与え方によって，3次元空間に線だけを描くか，面(つまり縦横の格子)
を描くかが変わります．例として，次のように4つのブロックに分かれたデー
タを考えます．ブロック間は1行の空行で分けられており，各ブロックのX,Yの
数は異なっています．この場合，gnuplotは格子を描かずに線だけを表示しま
す．</p>

<pre class="file">
# X   Y    Z
  0   0    0
  0   1    1
  0   2    4
  0   3    9
  0   4   16
  0   5   25

  1   0    1
  1   1    2
  1   2    5
  1   3   10
  1   4   17

  2   0    4
  2   1    5
  2   2    8
  2   3   13

  3   0    9
  3   1   10
  3   2   13
</pre>

<pre class="sample">
gnuplot&gt; splot "test3d.dat" using 1:2:3 with lines
</pre>

<div align="center"><img src="fig/sample7.1c.png" alt="fig/sample7.1c" width="275" height="158"></div>

<p>次に，XYの数をそろえてみます．</p>
<pre class="file">
# X   Y    Z
  0   0    0
  0   1    1
  0   2    4
  0   3    9
  0   4   16
  0   5   25

  1   0    1
  1   1    2
  1   2    5
  1   3   10
  1   4   17
  1   5   26

  2   0    4
  2   1    5
  2   2    8
  2   3   13
  2   4   20
  2   5   29

  3   0    9
  3   1   10
  3   2   13
  3   3   18
  3   4   25
  3   5   34
</pre>
<div align="center"><img src="fig/sample7.1d.png" alt="fig/sample7.1d" width="273" height="167"></div>

<p>この様に，縦横の格子が入ります．上の例では，各ブロックでのY座標が同
じ場合でしたが，ブロックのY座標が異なっても，各ブロック内の点の数が同
じなら格子が描かれます．これらのデータはグリッドデータとして扱われます．
gnuplotが等高線を描いたり，隠線処理をするのは，このグリッドデータに対
してです．試しに上のデータの最後のブロックのY座標だけを2倍すると，次
のようになります．</p>

<div align="center"><img src="fig/sample7.1e.png" alt="fig/sample7.1e" width="282" height="143"></div>

<p>各ブロックの点数が同じでも格子を描きたくない場合は，各ブロックの間に
2行の空行を入れます．</p>

<pre class="file">
# X   Y    Z
  0   0    0
  0   1    1
  0   2    4
  0   3    9
  0   4   16
  0   5   25


  1   0    1
  1   1    2
  1   2    5
  1   3   10
  1   4   17
  1   5   26


  2   0    4
  2   1    5
  2   2    8
  2   3   13
  2   4   20
  2   5   29


  3   0    9
  3   1   10
  3   2   13
  3   3   18
  3   4   25
  3   5   34
</pre>
<div align="center"><img src="fig/sample7.1f.png" alt="fig/sample7.1f" width="282" height="159"></div>




<h3><a name="matrix">matrix</a></h3>

<p>別の3次元データの与え方として，行列(matrix)で与える方法があります．
上の例の様に，XYの格子が固定さている場合には，こちらの方がデータが簡潔
になります．行列の行(横)はX，列(縦)がY軸になります．</p>

<pre class="file">
    0    1    4    9
    1    2    5   10
    4    5    8   13
    9   10   13   18
   16   17   20   25
   25   26   29   34
</pre>

<p>このデータをプロットするときは，<tt> using </tt> では無く，<tt> matrix </tt>
を用います．行列でデータを与える場合，XとYの座標には行と列の番号がそのまま
入ります．この例では，Xは0〜3，Yは0〜5となります．XとY座標の数値を与えたい場合は，
<tt> set {x|y}tics </tt> を使って軸の目盛を設定します．以下は，Xの0〜2に対して
100から300の数値を与えた場合です．</p>

<pre class="sample">
gnuplot&gt; set xtics ("100" 0, "200" 1, "300" 2) 
gnuplot&gt; splot "test3d.dat" matrix with lines
</pre>

<div align="center"><img src="fig/sample7.1g.png" alt="fig/sample7.1g" width="282" height="156"></div>



<div class="top"><a href="datafile.html#top"><img src="image/mark-up.png" alt="up"></a></div></td></tr></table>
<hr class="topsep">


</body>
</html>

