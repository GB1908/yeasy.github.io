<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / fractal / mandelbrot </title>
<!-- Generated 2002/4/15 -->
<!-- $Id: mandelbrot.html,v 1.6 2004/12/04 10:01:51 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<link rel="stylesheet" href="../style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="../index.html">
    <img src="../image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/11/29 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="../index.html">          HOME </a> |
<a href="../intro/index.html">    INTRODUCTION </a> |
<a href="../general.html">        INFORMATION </a> |
<a href="../gallery/index.html">  GALLERY </a> |
<a href="mandelbrot-e.html">      ENGLISH </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> <a href="index.html">   フラクタル  </a></p>

 <ul>
  <li><a href="recursive.html">  関数の再帰定義 </a>
  <li><a href="mandelbrot.html"> Mandelbrot集合 </a>
  <li><a href="selfsq.html">     Julia集合 (自己平方フラクタル) </a>
 </ul>
</td>

<td id="content">


<h1><a name="top"> Mandelbrot集合 </a></h1>

<p> ある複素数 A に対して，次のような漸化式を計算します．nが無限に大きくなっても
|z(n)|^2 が発散しないような複素数Aの集合をMandelbrot集合と呼びます．</p>

<pre class="file">
    z(0)   = 0.0
    z(n+1) = z(n)*z(n) + A
</pre>

<p> 複素平面をXY平面とし，この上にAをとります．z(n)が発散を始めるnの値
をZ座標としてプロットすればMandelbrot集合の3次元表示ができます．最初に
上の漸化式を再帰を使って定義します．これは，nをゼロから増加させていき，
|z|^2がある数値(ここでは2としています)を越えたらその時のnを返すような
関数です．複素数Aによっては反復回数が非常に大きくなりますので，とりあ
えずnの最大値を1000としておきます．</p>

<p> なおgnuplotでは，<tt>a</tt>を実部<tt>b</tt>を虚部とする複素数zは
<tt>z={a,b}</tt>と表記します．複素数から実部・虚部を取り出すには，関数
<tt>real(z), imag(z)</tt> を使います．また，<tt>abs(z)</tt>でzの絶対値
が求まります．逆に実数から複素数を作る方法は無いので，
<tt> complex(x,y)=x*{1,0}+y*{0,1}</tt>のように関数を定義します．</p>

<pre class="sample">
complex(x,y) = x*{1,0}+y*{0,1}
mandel(x,y,z,n) = (abs(z)&gt;2.0 || n&gt;=1000) ? \
                  n : mandel(x,y,z*z+complex(x,y),n+1)
</pre>

<p> x,yは複素平面での座標で，複素数Aを表します．zには漸化式z^2+Aが入り，
nを0から最大1000まで変化させたときabs(z)が2.0を越えた時のnの値が関数の値
として返されます．この関数を呼ぶには，x,y 座標の他に，zの初期値{0,0}と
nの初期値0が必要です．xとyの範囲を適当に与えたときの表示結果は次のよう
になります．</p>

<pre class="sample">
gnuplot&gt; set xrange [-1.5:0.5]
gnuplot&gt; set yrange [-1:1]
gnuplot&gt; set logscale z
gnuplot&gt; set isosample 50
gnuplot&gt; set hidden3d
gnuplot&gt; set contour
gnuplot&gt; splot mandel(x,y,{0,0},0) notitle
</pre>

<div align="center">
<img src="mandel1.png" alt="mandel1" height="260" width="420">
</div>


<img src="mandelbrot0.png" width="254" height="255" alt="mandelbrot0" align="right">

<p> 普通Mandelbrot集合をCGで表示するときは，画像の各ピクセルを複素平面
に割り当てておき，そのピクセルに対して漸化式を計算します．計算値が発散
したらその反復回数Nに応じたカラーをそのピクセルに表示します．簡単なX
Windowの<a href="xmandelbrot.c">プログラム</a>で作成した2次元平面で
のMandelbrot集合は右のようなものです．上の図の台地の部分が右の図では
黒に塗られている部分に対応します．</p>
<br clear="all">


<img src="mandel2.png" alt="mandel1" align="left" height="400" width="400">

<p> 左の図のように，Mandelbrot集合の一部を拡大すると非常に複雑な構造を
見ることができます．ここではかなり細かな等高線を描いてフラクタルらしさ
を表現して見ましたが，gnuplotのような線画ではこれくらいが限界で，CGで
遊ぶにはやはりちょっと無理のようです．新しいgnuplot ver.3.8/4.0では3次元で
のカラー表示が強化されています，それを使うと
<a href="http://ayapin.film.s.dendai.ac.jp/~matuda/Gnuplot/pm3d.html">
もっと綺麗なもの</a>が描けます．
</p>

<br clear="all">

<div class="top"><a href="mandelbrot.html#top"><img src="../image/mark-up.png" alt="up"></a></div>

<p> ここではオマケとして，X Windowで作ったMandelbrot集合のCGをお見せし
ます．漸化式の反復回数に応じてRGBを適当に割り当てることで綺麗な絵を描
くことができます．</p>

<div align="center">
<img src="mandelbrot1.png" width="254" height="255" alt="mandelbrot1">
<img src="mandelbrot2.png" width="254" height="255" alt="mandelbrot2">
</div>
<br>

<div align="center">
<img src="mandelbrot3.png" width="256" height="256" alt="mandelbrot3">
<img src="mandelbrot4.png" width="256" height="256" alt="mandelbrot4">
</div>

<div class="top"><a href="mandelbrot.html#top"><img src="../image/mark-up.png" alt="up"></a></div>

</td>
</tr></table>
<hr class="topsep">

</body>
</html>
