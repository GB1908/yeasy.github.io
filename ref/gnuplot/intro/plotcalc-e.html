<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<title> gnuplot / intro / plotcalc (E) </title>
<!-- Generated 2001/ 9/12  -->
<!-- $Id: plotcalc-e.html,v 1.11 2004/12/17 07:34:07 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=us-ascii">
<link rel="stylesheet" href="../style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="../index-e.html">
    <img src="../image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/8/31 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="../index-e.html">        HOME </a> |
                                  INTRODUCTION |
<a href="../general-e.html">      INFORMATION </a> |
<a href="../gallery/index-e.html">GALLERY </a> |
<a href="plotcalc.html">          JAPANESE </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> <a href="index-e.html">   Introduction to Gnuplot  </a></p>
  <ul>
   <li> <a href="basic-e.html">   Basic Use  </a>
   <li> <a href="plotcalc-e.html">Numerical Data </a>
     <ul>
       <li> <a href="plotcalc-e.html#data">     Data File </a>
       <li> <a href="plotcalc-e.html#oneline">  (X,Y) Pairs </a>
       <li> <a href="plotcalc-e.html#multiline">Several Lines </a>
       <li> <a href="plotcalc-e.html#label">    Title and Axis Names </a>
       <li> <a href="plotcalc-e.html#range">    XY Range </a>
       <li> <a href="plotcalc-e.html#tics">     Graduations </a>
       <li> <a href="plotcalc-e.html#done">     Done ! </a>
     </ul>
   <li> <a href="plotexp-e.html"> Experimental Data </a>
   <li> <a href="plotfunc-e.html">Functions </a>
   <li> <a href="working-e.html"> Life with gnuplot </a>
   <li> <a href="style-e.html">   Plotting Styles </a>
 </ul>
</td>

<td id="content">


<h1><a name="top"> Introduction to gnuplot --- Numerical Calculations </a></h1>

<h2><a name="data">Preparation of Data File</a></h2>

<p> Here is an example for plotting of numerical data which are generated by 
numerical calculations. To do it, the calculated results should be stored
in a data-file that is a usual text file. The following programs calculate
a Pade approximation of y=exp(-x)</p>


<pre class="file">
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

int main(void);
int main(void)
{
 int i;
 double x,y,z1,z2,d;

 d = 0.1;
 x = 0.0;
 for(i=0;i&lt;50;i++){
   x += d;
   y  = exp(-x);
   z1 = (6 - 2*x)/(6 + 4*x + x*x);
   z2 = (6 - 4*x + x*x)/(6 + 2*x);
   printf("% 6.2f % 11.4e % 11.4e % 11.4e\n",
             x,y,z1,z2);
 }
 return 0;
}
</pre>

 
<pre class="file">
      INTEGER I 
      REAL*8  X,Y,Z1,Z2,D
      D = 0.1
      X = 0.0
      DO 10 I=1,50
          X = X+D;
          Y  = EXP(-X)
          Z1 = (6 - 2*X)/(6 + 4*X + X*X)
          Z2 = (6 - 4*X + X*X)/(6 + 2*X)
          WRITE(6,20) X,Y,Z1,Z2
   10 CONTINUE
   20 FORMAT(F6.2,3(1X,1PE11.4))
      STOP
      END
</pre>


<p> Those programs give the following output. The first column is
 X-coordinate, the second is a direct calculation of EXP(-X), the third
 and forth columns are the Pade approximation with different orders. As
 you can see, this approximation is only valid for small X values. </p>


<pre class="file">
  0.10  9.0484E-01  9.0484E-01  9.0484E-01
  0.20  8.1873E-01  8.1871E-01  8.1875E-01
  0.30  7.4082E-01  7.4074E-01  7.4091E-01
  0.40  6.7032E-01  6.7010E-01  6.7059E-01
  0.50  6.0653E-01  6.0606E-01  6.0714E-01
                    ....
  4.60  1.0052E-02 -7.0237E-02  5.7632E-01
  4.70  9.0953E-03 -7.2510E-02  6.0325E-01
  4.80  8.2297E-03 -7.4627E-02  6.3077E-01
  4.90  7.4466E-03 -7.6597E-02  6.5886E-01
  5.00  6.7379E-03 -7.8431E-02  6.8750E-01
</pre>



<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="oneline">Plot (X,Y) Pairs </a></h2>

<p> Data file "output.dat" contains the calculated values above. Each
X-value has 3 different Y values in this case. To draw the second column
(calculated EXP(-X) values) as a function of the first column, use 
<tt> using </tt> keyword at plotting. </p>

<pre class="sample">
gnuplot&gt; plot "output.dat" using 1:2 with lines
</pre>

<div align="center"><img src="plotcalc1.png" alt="plotcalc1" width="414" height="332"></div>

<p> A style of graph is specified by the <tt> with </tt> keyword.  In
the example above, <tt> lines </tt> style is given, with which each
data point is connected by small  lines. There are several kinds of
line-styles those are numbered by 1, 2, 3... To change the line style,
<tt> with lines </tt> is followed by the line-style number. If the
number is not given, gnuplot assigns numbers automatically from 1 to a
certain maximal number. </p>

<p> There are several plot-styles --- draw symbols, connect with lines,
connect with step-like lines, draw bars, etc. </p>

<div align="center"><table>
<tr><td align="center"> with points </td>
    <td><img src="plotcalc1a.png" alt="plotcalc1a" width="207" height="166"></td></tr>
<tr><td align="center"> with steps </td>
    <td><img src="plotcalc1b.png" alt="plotcalc1b" width="207" height="166"></td></tr>
<tr><td align="center"> with impulses </td>
    <td><img src="plotcalc1c.png" alt="plotcalc1c" width="207" height="166"></td></tr>
</table></div>




<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="multiline">Draw Several Lines</a></h2>

<p> Next, the third and fourth columns are plotted on the same figure.
To draw several lines simultaneously, repeat the data specification
like -- <tt> plot "A" using 1:2 with line, "B" using 1:2 with points,
...</tt> Sometimes such a command line becomes very long. If a line is
ended with a character '\', the next line is regarded as a continuous
line. Don't put any letters after the back-slash.</p>

<pre class="sample">
gnuplot&gt; plot "output.dat" using 1:2 with lines, \
&gt; "output.dat" using 1:3 with lines,\
&gt; "output.dat" using 1:4 with lines
</pre>

<div align="center"><img src="plotcalc2.png" alt="plotcalc2" width="414" height="332"></div>

<p> The second line shown by green color is negative at the large
X values, so that the Y-axis scale was enlarged to -0.1</p>

<p> In the figure legend, the data-file name and the column numbers
those were used for plotting were indicated. The red line is obtained
by an analytical function, so let's change the first line of the
legend into "Analytical". The next green line is a result of Pade
approximation with L=1 and M=2, so that "L=1, M=2" should be
displayed. The blue line is also the result of "L=2, M=2" Pade
approximation. </p>


<pre class="sample">
gnuplot&gt; plot "output.dat" using 1:2 title "Analytical" with lines, \
&gt; "output.dat" using 1:3 title "L=1, M=2" with lines,\
&gt; "output.dat" using 1:4 title "L=2, M=1" with lines
</pre>

<div align="center"><img src="plotcalc3.png" alt="plotcalc3" width="414" height="332"></div>




<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="label">Insert a Graph Title and Axis Names</a></h2>

<p> Now, let's insert X and Y axis names. The name of X axis is just
"x", while the Y axis is "y=exp(-x)". To set those names, use the <tt>
set xlabel </tt> and <tt> set ylabel </tt> commands.  In addition, you
can put a title of this figure, "Pade approximation", by the <tt>
set title </tt> command. With the <tt> replot </tt> command, you can
omit a long plot command.</p>

<pre class="sample">
gnuplot&gt; set xlabel "x"
gnuplot&gt; set ylabel "y=exp(-x)"
gnuplot&gt; set title "Pade approximation"
gnuplot&gt; replot
</pre>

<div align="center"><img src="plotcalc4.png" alt="plotcalc4" width="414" height="332"></div>

<p> The figure size is changed when the title and axis names are given. 
Gnuplot calculates the figure size automatically so as to fit everything
in a screen, then the graph itself becomes smaller when the axis names
or figure title are given.</p>

<p> The Y axis name "y=exp(-x)" does not go to the left side of the
Y-axis, but it is displayed at the top. This is because gnuplot cannot
rotate a text when the X Window system is used. With the Postscript
terminal you can get a rotated Y-axis name which locates at an
appropriate position. If your gnuplot is newer than ver.3.8, the Y-axis
name should be rotated on your screen too. </p>




<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="range"> Change the X and Y Axes Range </a></h2>

<p> Now let's change the X and Y ranges. Set the Y-range [0,1], and the
X-range [0,2]. </p>

<pre class="sample">
gnuplot&gt; set xrange [0:2]
gnuplot&gt; set yrange [0:1]
gnuplot&gt; replot
</pre>

<div align="center"><img src="plotcalc5.png" alt="plotcalc5" width="414" height="332"></div>


<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="tics">Put Graduations </a></h2>


<p> The graduations on the X-axis starts with 0, and the interval is
0.5.  To change the graduations (tics), use <tt> set {x|y}tics </tt>.
The tics can be controlled by three optional numbers. If there is a
one number after the <tt> set tics </tt> command, like <tt> set
xtics 10 </tt>, this number "10" is regarded as an increment.  If
there are two figures, the first one is the initial value, and the
second is the increment. If three, the last one becomes the final
value.</p> 

<p> You can also divide the interval which is given as an increment
by the <tt> set tics </tt> command, and draw small tics inside
the interval with the <tt> set m{x|y}tics <i>n</i></tt> command,
where <i>n</i> is the number of division.</p>


<pre class="sample">
gnuplot&gt; set xtics 1
gnuplot&gt; set mxtics 5
gnuplot&gt; set ytics 0.5
gnuplot&gt; set mytics 5
gnuplot&gt; replot
</pre>




<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
<h2><a name="done">Done ! </a></h2>

<p> Then we make the graph in a Postscript format, and print it out.
Firstly change the terminal into "postscript", and specify a name of
output file. Before quit gnuplot, save your parameters and other setup
into a file (<a href="output.plt"> output.plt </a>)</p>

<pre class="sample">
gnuplot&gt; set term postscript
gnuplot&gt; set output "output.ps"
gnuplot&gt; replot
gnuplot&gt; save "output.plt"
gnuplot&gt; quit
</pre>

<p> The file 'output.ps' can be browse with a Postscript viewer
like 'gv' or 'ghostview', and you can print this file with a 
Postscript printer. The following image is our Postscript data
'output.ps' displayed with ghostview. </p>

<div align="center"><img src="plotcalc7.png" alt="plotcalc7" width="577" height="462"></div>

<p> When you plotted the graph on your screen, the first line was a
red line. However it turned into the solid line here.  The blue and
green lines became the dashed lines.  (Though it is hard to see them
in a small size image.)  As you can see above, line and symbol types
depend on the terminal you use. In order to know which line number 
corresponds to the solid, dashed, dotted, etc. try <tt> test </tt>.
For example, on the X window system, you get:</p>

<pre class="sample">
gnuplot&gt; set term x11
gnuplot&gt; test
</pre>

<div align="center"><img src="plotcalc8.png" alt="plotcalc8" width="414" height="332"></div>

<div class="top"><a href="plotcalc-e.html#top"><img src="../image/mark-up.png" alt="up"></a></div>
</td></tr></table>
<hr class="topsep">

</body>
</html>

