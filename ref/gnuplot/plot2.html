<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / plot (2)</title>
<!-- Generated 1999/ 7/21 -->
<!-- $Id: plot2.html,v 1.16 2006/03/03 01:08:59 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/5 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index.html">           HOME </a> |
<a href="intro/index.html">     INTRODUCTION </a> |
<a href="general.html">         INFORMATION </a> |
<a href="gallery/index.html">   GALLERY </a> |
<a href="plot2-e.html">         ENGLISH </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend.html">      凡例(Legend) </a>
    <li><a href="tics.html">        目盛(Tics) </a>
    <li><a href="label.html">       ラベル(Label) </a>
    <li><a href="plot1.html">       2次元プロット </a>
    <ul>
      <li><a href="plot1.html#5.1">
           一定の大きさ </a>
      <li><a href="plot1.html#5.2">
           左右両方のY軸 </a>
      <li><a href="plot1.html#5.3">
           軸を消す </a>
      <li><a href="plot1.html#5.4">
           縦横比の固定された図 </a>
      <li><a href="plot2.html#5.5">
           ゼロ軸 </a>
      <li><a href="plot2.html#5.6">
           誤差棒の横線 </a>
      <li><a href="plot2.html#5.7">
           文字を大きく</a>
      <li><a href="plot2.html#5.8">
           曲線で補間</a>
      <li><a href="plot2.html#5.9">
           枠線上データ点を消す </a>
      <li><a href="plot3.html#5.10">
           複数のグラフ </a>
      <li><a href="plot3.html#5.11">
           格子 </a>
      <li><a href="plot4.html#5.12">
           複数の軸 </a>
      <li><a href="plot4.html#5.13">
           任意の格子 </a>
      <li><a href="plot5.html#5.14">
           図中の図 </a>
      <li><a href="plot5.html#5.15">
           棒グラフ </a>
      <li><a href="plot6.html#5.16">
           2つの図を並べる．</a>
      <li><a href="plot7.html#5.17">
           正規確率軸 </a>
      <li><a href="plot7.html#5.18">
           データ値を印刷 </a>
    </ul>
    <li><a href="plot3d.html">      3次元プロット </a>
    <li><a href="polar.html">       極座標プロット </a>
    <li><a href="parametric.html">  媒介変数表示 </a>
    <li><a href="datafile.html">    データファイルの数値 </a>
    <li><a href="postproc.html">    図を描いたその後は</a>
    <li><a href="misc1.html">       その他 </a>
  </ul>
 <br>
</td>


<td id="content">




<h1><a name="top"> 2次元プロットのあれこれ (その2)</a></h1>

<div align="center">
<a href="plot1.html"> 1 </a> | 
<a href="plot2.html"> 2 </a> | 
<a href="plot3.html"> 3 </a> | 
<a href="plot4.html"> 4 </a> | 
<a href="plot5.html"> 5 </a> | 
<a href="plot6.html"> 6 </a> | 
<a href="plot7.html"> 7 </a>
</div>


<h2><a name="5.5">X=0, Y=0のゼロ軸を描きたい． </a></h2>

<p> <tt>set {x|y}zeroaxis </tt>を使います．オプションを付けなければ，
線種0(点線)で描かれます．ls <i>line_stle</i>, lt <i> line_type</i>,
lw <i> line_width </i> のオプションでゼロ軸の線種を変えることができます．
以下の例では <tt> lt -1 </tt>を使い，
枠線と同じ線を描いてみました．</p>

<pre class="sample">
gnuplot&gt; set xzeroaxis lt -1
gnuplot&gt; set yzeroaxis
</pre>

<div align="center"><img src="fig/sample5.5.png" alt="fig/sample5.5" width="296" height="226"></div>



<div class="top"><a href="plot2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="5.6">誤差棒の先に付く横線を消したい．</a></h2>

<p>誤差付きのプロットをすると，誤差棒の先に小さな線が入ります．
これを嫌う人も居ますし，データ点数が増えて来ると邪魔になったり
します．これを消すには，次のようにします．</p>

<pre class="sample">
gnuplot&gt; set bar 0
</pre>

<p>barの後の数字で線の長さを指定します．0にすれば線は表示されません．</p>

<p>なお，<tt> set pointsize </tt>で記号の大きさを変えても，この線の長さ
は変わりませんので，記号と誤差の横棒のバランスを取りたければ，bar の値
も変えた方が良いでしょう．</p>

<pre class="sample">
gnuplot&gt; set pointsize 3
gnuplot&gt; set bar 3
</pre>



<div class="top"><a href="plot2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="5.7">文字を大きくしたい．</a></h2>

<p> 文字を大きくできるかどうかは，図を出力しようとしているデバイスに依
存します．labelやtitleの設定ではフォントを指定できますので，大きめのフォ
ントが使えるのならそれでフォントを変更して大きくできますが，案外面倒な
ものです．</p>

<p> 出力をPostScriptにするなら，比較的簡単に文字を大きくできます．文字
を大きくするのではなくて，図を小さくするのです．フォントの大きさは変わ
らないので，相対的に文字が大きくなります．PostScriptなら，印刷時に全体
を拡大できるので小さい図を作っても問題ありません．</p>

<pre class="sample">
gnuplot&gt; set size 0.3,0.3
</pre>

<img src="fig/sample5.7a.png" alt="fig/sample5.7a" align="left" width="383" height="264">
<p> 少々極端な例ですが，上のように図の大きさを縦横30%にしておきます．
これで図を作り，EPSで出力します．これを再び拡大します．普通は，X,Yを
0.5〜0.7程度にしておくと，出来上がったEPSをLaTeXの文書に取り込んだ時に，
文字が潰れずにほど良い大きさになるようです．</p>
<br clear="all">


<p> 同じくPostScript出力にてフォントを細かく指定したいならlabelやtitleの 
     <tt> font </tt>optionを使って，使用するフォントとサイズを指定します．
     また，<tt> set terminal </tt>でのオプションで，基本のフォントサイズ
     を指定できます．以下の例では基本のフォントをヘルベチカの16ptとし，
     表題と軸名にそれぞれ別のフォントとサイズを割り当てています．</p>

<pre class="sample">
gnuplot&gt; set terminal postscript enhanced "Helvetica" 16
gnuplot&gt; set title "Damping Function" font "Times-Roman,40"
gnuplot&gt; set xlabel "X-AXIS" font "Helvetica,20"
gnuplot&gt; set ylabel "Y-AXIS" font "Times-Italic,32"
gnuplot&gt; plot exp(-x)
</pre>

<div align="center">
<img src="fig/sample5.7b.png" alt="fig/sample5.7b" width="530" height="371">
</div>

<p> ただ，上にも書いていますが，gnuplotでここまで面倒なことをやる必要が
     あるかどうか，私としては疑問です．gnuplotはプロッターとして割り切り，
     図を綺麗に飾りたいなら Tgifなどを使ったほうが，自分の好みに合う図を
     作りやすいと思います．</p>





<div class="top"><a href="plot2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="5.8">データ点の間を滑らかな曲線で補間したい．</a></h2>

<p> gnuplotには3次のSpline補間等によってデータ間を補間する機能がありま
す．補間した曲線を表示するには，plotコマンドのオプションにあるsmoothを
使います．smoothには平滑方法を指定するオプションがあり，3次のスプライ
ンやベジエ曲線を指定できます．スプラインはデータ点を必ず通る補間を行い
ますが，ベジエだとデータ点を「制御点」とする曲線を引くので，データ点を
必ずしも通りません．</p>


<p> 次の例では，3次スプラインとベジエでの補間を比較しています．データ
点と補間結果の曲線が区別しやすいように，初めにデータだけを記号で描き，
次に補間曲線をスプラインとベジエを指定して実線でプロットしています．</p>

<pre class="sample">
gnuplot&gt; plot "test.dat" using 1:2 notitle with points, \
&gt;             "test.dat" using 1:2 smooth csplines \
&gt;                                  title "spline" with lines,\ 
&gt;             "test.dat" using 1:2 smooth bezier \
&gt;                                  title "bezier" with lines
</pre>

<div align="center"><img src="fig/sample5.8a.png" alt="fig/sample5.8a" width="304" height="235"></div>


<p> スプライン関数のオプション <tt> csplines </tt>
 はデータ補間を行っていますが，ベジエ曲線を使う方法はデータを
平滑化するものであって補間で
はありません．一方，スプライン関数をデータ平滑化に使うオプション 
<tt>acsplines </tt>もあり ，これによってデータの近似曲線を作成する方法もあ
ります．上の例では，データのX,Yの値だけを使いましたが，近似曲線をひく
には，各点の重み(誤差)を与える必要があります．以下は，誤差付きの実験デー
タを，ベジエとスプラインで平滑化する方法です．</p>

<pre class="sample">
gnuplot&gt; plot "test.dat" using 1:2:3 notitle with yerrorbars, \
&gt;             "test.dat" using 1:2:3 smooth acsplines \
&gt;                                    title "acsplines" with lines,\ 
&gt;             "test.dat" using 1:2   smooth bezier \
&gt;                                    title "bezier"    with lines
</pre>

<img src="fig/sample5.8b.png" alt="fig/sample5.8b" align="left" width="400" height="300">


<p>ベジエ曲線は，データの変化をかなり追随していますが，スプラインでは，
本当に大雑把なデータのトレンドを表しているのが分かると思います．データ
のプロット中に曲線を"eye guide"で描き込むことはしばしば行われますが，
gnuplotを使えばこの様な曲線が簡単に描けます．</p>


<p>スプラインによる近似曲線ではデータ点の重みが必要ですが，全データに
同じ重みをかけることもできます．この場合は，<tt> using 1:2:(1.0) </tt>
のように3カラム目のデータとして常に1.0を使うようにします．</p>



<div class="top"><a href="plot2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="5.9">枠線上にあるデータ点を消したい．</a></h2>

<p> 枠線近くにあるデータや線分は，枠からはみ出さない様に切り取る(クリッ
プする)ことができます．<tt> set clip </tt>は，データをどのようにクリッ
ピングするかを制御します．clipにはpoints, one, two の3つのタイプがあり
ます．少々分かりにくい話なので，次のような 5点のデータの例を使って説明
します．</p>
<pre class="file">
#  X     Y  
   1.0   1.0
   2.0   1.5
   3.0   2.0
   4.0   1.5
   5.0   1.0
</pre>


<p>このデータを普通にpointsを使って表示すると，最初の点(X=1)と最後の点
(X=4)は図の隅に，真中の点は上の枠線上に表示されます．次の図は，分かり
やすいように<tt> set pointsize 10 </tt>として，点を拡大したものです．</p>

<pre class="sample">
gnuplot&gt; set pointsize 10
gnuplot&gt; plot "test.dat" notitle with points
</pre>

<img src="fig/sample5.9a.png" alt="fig/sample5.9a" align="left" width="400" height="300">

<p> この例の様に，特に大きな記号で図を描いた場合は，枠上の点が煩わしくなります．
クリップを指定すると，これらの点は消えます．</p>
<br clear="all">

<pre class="sample">
gnuplot&gt; set clip points
gnuplot&gt; plot "test.dat" notitle with points
</pre>

<img src="fig/sample5.9b.png" alt="fig/sample5.9b" align="left" width="400" height="300">

<p>クリップを指定した場合で，X=1,3,5でのデータが消えています．実は，デー
タが枠線上に無くても，そこに近ければクリッピングが実行されます．上の例
でも，Y軸の上限を2.1まで広げても，X=3のデータは表示されません．どれく
らい近付くと消えるのかは，良くわかりません．</p>


<p> クリップの次のタイプは <tt> set clip one </tt>
で，描いている線が枠外にはみ出すときに，枠線付近でどのようにするかを
指示するものです．これはデフォルトで有効になっており，
グラフは枠線に交わるところまで描かれます．これを無効にする(<tt> set noclip </tt>)と，
枠線と交わる線分が消されます．</p>
<br clear="all">

<p> 「枠線と交わる線分」というのが分かりにくいかもしれません．gnuplot
は，関数を表示するときに，sampling rateで指定されている数(標準では100
点)だけの座標値を計算し，その間を直線で結んでいきます．つまり，関数の
曲線を実際に描いているのではなく，小さな線分を繋げてそれらしく見せてい
るわけです．座標点が枠の外にあると，この線分が枠線と交わります．この時
に，線分を全部消すか(noclip)，枠と交わるまでを描くか(clip)を，
<tt> set clip one </tt>で指示します．</p>

<p> y=sin(x)を使い，Yの範囲を[0:1]にして表示してみましょう．このとき，グラ
フはX軸と何度か交わります．さらに，<tt> clip one </tt>をOFFにして比較します．
表示はlinespointsを使います．記号が描かれている部分が，gnuplot
が座標を実際に計算した部分で，その間の線が，上で言う線分になります．</p>

<pre class="sample">
gnuplot&gt; set clip one
gnuplot&gt; plot sin(x) with linespoints
gnuplot&gt; set noclip one
gnuplot&gt; replot
</pre>

<div align="center"><table border="0">
 <tr><td><img src="fig/sample5.9c.png" alt="fig/sample5.9c" width="400" height="300"> </td></tr>
 <tr><td align="center"> clip one </td></tr>
 <tr><td><img src="fig/sample5.9d.png" alt="fig/sample5.9d" width="400" height="300"> </td></tr>
 <tr><td align="center"> noclip one </td></tr>
</table></div>


<p>最後のクリップは<tt> set clip two </tt>です．これは clip oneの場合
と同様に，枠外に線分がはみ出したときの処理を指定するものですが，線分の
両端いづれもが枠の外にある場合のものです．標準ではclipです．あまりこ
のような例は無いと思うのですが，無理矢理作るとすれば，次のようなもので
しょうか．</p>

<pre class="sample">
gnuplot&gt; set yrange [-0.5:0.5]
gnuplot&gt; set samples 10
gnuplot&gt; set clip two
gnuplot&gt; plot sin(x) with linespoints
gnuplot&gt; set noclip two
gnuplot&gt; replot
</pre>

<div align="center"><table border="0">
 <tr><td><img src="fig/sample5.9e.png" alt="fig/sample5.9e" width="400" height="300"> </td></tr>
 <tr><td align="center"> clip two </td></tr>
 <tr><td><img src="fig/sample5.9f.png" alt="fig/sample5.9f" width="400" height="300"> </td></tr>
 <tr><td align="center"> noclip two </td></tr>
</table></div>

<p> 上の例のようにサンプリング数を極端に少なくすると，線分によっては，
その両端がYの上限と下限の外側に来る時があります．この様な線分を描くか
どうかが，clip twoによって変化します．</p>


<div class="top"><a href="plot2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
</td></tr></table>
<hr class="topsep">


</body>
</html>

