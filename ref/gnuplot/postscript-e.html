<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / postscript (E) </title>
<!-- Generated 2001/ 8/21 -->
<!-- $Id: postscript-e.html,v 1.13 2004/12/17 07:33:39 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=us-ascii">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index-e.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/16 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index-e.html">         HOME </a> |
<a href="intro/index-e.html">   INTRODUCTION </a> |
<a href="general-e.html">       INFORMATION </a> |
<a href="gallery/index-e.html"> GALLERY </a> |
<a href="postscript.html">      JAPANESE </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend-e.html">     Legend </a>
    <li><a href="tics-e.html">       Tics </a>
    <li><a href="label-e.html">      Label </a>
    <li><a href="plot1-e.html">      2-D Plot </a>
    <li><a href="plot3d-e.html">     3-D Plot </a>
    <li><a href="polar-e.html">      Polar Coordinate </a>
    <li><a href="parametric-e.html"> Parametric Functions </a>
    <li><a href="datafile-e.html">   Data File </a>
    <li><a href="postproc-e.html">   After Plotting </a>
    <ul>
      <li><a href="postproc-e.html#8.1">
           TeX document </a>
      <li><a href="postproc-e.html#8.2">
           merge several figures </a>
      <li><a href="image-e.html#8.3">
           convert into image </a>
      <li><a href="postscript-e.html#8.4">
           change colors </a>
      <li><a href="postscript-e.html#8.5">
           right-side margin </a>
    </ul>
    <li><a href="misc1-e.html">      Miscellaneous Stuff </a>
  </ul>
</td>


<td id="content">


<h1><a name="top"> After Plotting (No.3) </a></h1>

<div align="center">
<a href="postproc-e.html">   1 </a> | 
<a href="image-e.html">      2 </a> | 
<a href="postscript-e.html"> 3 </a>
</div>


<h2><a name="8.4"> How do I change colors in a  PostScript figure ? </a></h2>


<p> You cannot specify colors of lines and symbols directly from
     gnuplot. One of the easiest way to do is, make an obj file of Tgif
     by setting <tt> set term tgif </tt>, and edit your figure with
     Tgif, then save it in a color PS format.</p>


<p> Here is a tricky way to change the colors. Edit the postscript file
     by hand. The PS file generated by gnuplot is rather easy to
     read. With the following gnuplot commands you can get a color
     index. Of course the <tt> test </tt> command yields the color
     index, too. </p>


<pre class="sample">
gnuplot&gt; set term postscript enhanced color 
gnuplot&gt; set output "colorindex.ps"
gnuplot&gt; set size 0.5,0.5
gnuplot&gt; set noborder
gnuplot&gt; set nokey
gnuplot&gt; set linestyle  1 linetype  1 linewidth 8
gnuplot&gt; set linestyle  2 linetype  2 linewidth 8
gnuplot&gt; set linestyle  3 linetype  3 linewidth 8
gnuplot&gt; set linestyle  4 linetype  4 linewidth 8
gnuplot&gt; set linestyle  5 linetype  5 linewidth 8
gnuplot&gt; set linestyle  6 linetype  6 linewidth 8
gnuplot&gt; set linestyle  7 linetype  7 linewidth 8
gnuplot&gt; set linestyle  8 linetype  8 linewidth 8
gnuplot&gt; set linestyle  9 linetype  9 linewidth 8
gnuplot&gt; set linestyle 10 linetype 10 linewidth 8
gnuplot&gt; # for gnuplot ver.4
gnuplot&gt; # set style line 1 line type 1 linewidth 8
gnuplot&gt; # ... etc
gnuplot&gt; set noxtics
gnuplot&gt; set ytics nomirror 1
gnuplot&gt; set yrange [ -1.5 : 10.5 ]
gnuplot&gt; plot  1 w l ls  1,  2 w l ls  2,  3 w l ls  3, 4 w l ls  4,\
gnuplot&gt;       5 w l ls  5,  6 w l ls  6,  7 w l ls  7, 8 w l ls  8,\
gnuplot&gt;       9 w l ls  9, 10 w l ls 10, -1 w line -1, 0 with line 0
gnuplot&gt; pause -1
</pre>


<p> Ten line types are defined in the PostScript terminal, those are
     numbered from 1 to 9. Above, functions <i>y</i>=1 to <i>y</i>=10
     are displayed with the various line types. In order to see the
     color clearly very thick lines are used there.</p>


<p> Do the same thing but with a B/W PostScript. Remove the <tt> color
     </tt> option, and save the output into "monoindex.ps". You can see
     the difference between "colorindex.ps" and "monoindex.ps" with the
     diff command on UNIX. The difference is only one line, <tt> /Color
     true def </tt> and <tt> /Color false def </tt>. Therefore you can
     choose color or B/W without gnuplot by editing this part <tt>/Color
     {true |false}</tt>.</p>


<p> Lets read the PS file generated above, you can easily find the place
     where colors are defined. Near line 40th, you see the following
     section (extra spaces are inserted here to align).</p>


<pre class="file">
/LT0 {PL [                                         ] 1   0   0   DL} def
/LT1 {PL [4 dl 2   dl                              ] 0   1   0   DL} def
/LT2 {PL [2 dl 3   dl                              ] 0   0   1   DL} def
/LT3 {PL [1 dl 1.5 dl                              ] 1   0   1   DL} def
/LT4 {PL [5 dl 2   dl 1 dl 2 dl                    ] 0   1   1   DL} def
/LT5 {PL [4 dl 3   dl 1 dl 3 dl                    ] 1   1   0   DL} def
/LT6 {PL [2 dl 2   dl 2 dl 4 dl                    ] 0   0   0   DL} def
/LT7 {PL [2 dl 2   dl 2 dl 2 dl 2 dl 4 dl          ] 1   0.3 0   DL} def
/LT8 {PL [2 dl 2   dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL} def
</pre>


<p> Those lines correspond to the line types 1 to 9. Three numbers in
     LT0, "1 0 0" defines RGB (Red, Green, and Blue), then LT0 becomes
     red.  In the same manner, LT1 is green, LT2 is blue...and
     (1,0,1)=Magenta, (0,1,1)=Cyan, (1,1,0)=Yellow, (0,0,0)=Black,
     (1,0.3,0)=Orange, and (0.5,0.5,0.5)=Gray. Now you can change the
     line color by changing these RGB values.</p>


<p> To make a gradation from red to yellow, fix the R=1 and Blue=0, and
     change G from 0 to 1 gradually.</p>


<pre class="file">
/LT0 {PL [                                         ] 1   0    0   DL} def
/LT1 {PL [4 dl 2   dl                              ] 1   0.1  0   DL} def
/LT2 {PL [2 dl 3   dl                              ] 1   0.2  0   DL} def
/LT3 {PL [1 dl 1.5 dl                              ] 1   0.3  0   DL} def
/LT4 {PL [5 dl 2   dl 1 dl 2 dl                    ] 1   0.4  0   DL} def
/LT5 {PL [4 dl 3   dl 1 dl 3 dl                    ] 1   0.5  0   DL} def
/LT6 {PL [2 dl 2   dl 2 dl 4 dl                    ] 1   0.6  0   DL} def
/LT7 {PL [2 dl 2   dl 2 dl 2 dl 2 dl 4 dl          ] 1   0.7  0   DL} def
/LT8 {PL [2 dl 2   dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1   0.8  0   DL} def
</pre>


<p> The results are as follows. The first image is generated with gnuplot,
while the second one is made with editing the PS file as described above.
With this method you can use any colors in you figure. An automatic conversion
of those colors can be achieved with some programs like perl or sed.</p>

<div align="center"><table border="0">
<tr><td align="center"><img src="fig/sample8.4a.png" alt="fig/sample8.4a" width="370" height="256"></td>
    <td align="center"> ColorPS generated by gnuplot </td></tr>
<tr><td align="center"><img src="fig/sample8.4b.png" alt="fig/sample8.4b" width="372" height="258"></td>
    <td align="center"> PS file edited </td></tr>
</table></div>



<p> Now, go back to the postscript data above, you can see "[4 dl 2 dl]"
     which defines a line pattern to draw dotted, dot-dashed, and dashed
     lines. For LT1, the pattern is defined as "[4 dl 2 dl]". This gives
     a solid line of 4 unit length and a space of 2 unit length, so that
     it becomes a dashed-line. "[5 dl 2 dl 1 dl 2 dl]" defines a solid
     line of 5 unit length, space of 2, line of 1, and space of 2, and
     so on.  If you need an extra line pattern, edit here to make your
     own.</p>


<p> In the PS file you can find the following 2 lines, those are just above 
the definition of LT0.</p>

<pre class="file">
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
</pre>

<p> The line LTb is used for the border of graph, and LTa is for the zero axes.
Their color is black since RGB is "0 0 0". If you want to change those color,
edit here.</p>




<div class="top"><a href="postscript-e.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="8.5"> I want to get rid of a right-side margin in a square figure. </a></h2>


<p>A square figure can be drawn by <tt> set size square </tt>.  However,
     an EPS file generated with gnuplot is not square but still
     rectangular, and you get extra margin. The reason is that gnuplot
     determines BoundingBox so as to cover the whole screen. In order to
     get rid of the right-side margin, you need to edit the EPS file by
     hand. The BoundingBox is defined at the top of the generated EPS
     file.</p>

<pre class="file">
%%BoundingBox: 50 50 410 302
</pre>

<p> This "410" is too large in this case, then reduce it.  An
     appropriate BoundingBox coordinate depends on the label and margin,
     so that you may find the best number after some try-and-errors.  In
     the above case, about 320 works fine because the vertical size is
     302.</p>

<p> If you are working on Unix or Linux, and your system has
     GhostScript, probably you have <tt>ps2ps</tt>, <tt>eps2eps</tt>
     commands. Those shell scripts convert your PostScript graphs
     generated by gnuplot into more proper PS file. You can adjust your BoundingBox
     with the following command.</p>

<pre class="sample">
% eps2eps input.eps output.eps
</pre>

<div align="right"><i> from Russell in  Universiteit van Amsterdam. Thanks !</i></div>


<div class="top"><a href="postscript-e.html#top"><img src="image/mark-up.png" alt="up"></a></div>
</td></tr></table>
<hr class="topsep">


</body>
</html>
