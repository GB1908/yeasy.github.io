<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<title> gnuplot / label (2) </title>
<!-- Generated 1999/ 9/28 -->
<!-- $Id: label2.html,v 1.12 2004/12/17 07:33:39 kawano Exp $ -->
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<link rel="stylesheet" href="style-new.css" type="text/css">
</head>
<body>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td bgcolor="#cccc90" width="320">
    <div align="left">
    <a href="index.html">
    <img src="image/gnuplot_logo2.png" alt="GNUPLOT" width="320" height="90">
    </a></div></td>
    <td bgcolor="#cccc90">
      <div align="center"><h3> - not so Frequently Asked Questions - </h3> </div>
      <div class="update"> update 2004/9/5 </div>
    </td>
</tr>
<tr><td bgcolor="#fae8ba"></td>
    <td bgcolor="#fae8ba"><div class="navi"> 
<a href="index.html">           HOME </a> |
<a href="intro/index.html">     INTRODUCTION </a> |
<a href="general.html">         INFORMATION </a> |
<a href="gallery/index.html">   GALLERY </a> |
<a href="label2-e.html">        ENGLISH </a>
</div></td></tr>
</table>
<hr class="topsep">


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td id="menu">
 <p> not so FAQ</p>
  <ul>
    <li><a href="legend.html">      凡例(Legend) </a>
    <li><a href="tics.html">        目盛(Tics) </a>
    <li><a href="label.html">       ラベル(Label) </a>
    <ul>
      <li><a href="label.html#4.1">
           上付き・下付き添字 </a>
      <li><a href="label.html#4.2">
           ギリシャ文字 </a>
      <li><a href="label.html#4.3">
           間隔の調整 </a>
      <li><a href="label2.html#4.4">
           ラベルの座標は </a>
      <li><a href="label2.html#4.5">
           矢印 </a>
      <li><a href="label3.html#4.6">
           ラベルの色  </a> 
          <a href="version.html"><b>[ver.4]</b></a>
      <li><a href="label3.html#4.7">
           Y軸の向き </a>
    </ul>
    <li><a href="plot1.html">       2次元プロット </a>
    <li><a href="plot3d.html">      3次元プロット </a>
    <li><a href="polar.html">       極座標プロット </a>
    <li><a href="parametric.html">  媒介変数表示 </a>
    <li><a href="datafile.html">    データファイルの数値 </a>
    <li><a href="postproc.html">    図を描いたその後は</a>
    <li><a href="misc1.html">       その他 </a>
  </ul>
 <br>
</td>


<td id="content">
<h1><a name="top"> ラベルあれこれ  (その2)</a></h1>

<div align="center">
<a href="label.html">  1 </a> | 
<a href="label2.html"> 2 </a> | 
<a href="label3.html"> 3 </a>
</div>



<h2><a name="4.4">ラベルを表示するときの座標は？</a></h2>

<p> gnuplotでは，グラフに任意の直線・矢印・文字列を書き込むときの位置
や凡例の位置を表すのに，4つの座標系が使われます．これらは，"first",
"second", "graph", "screen"，と呼ばれ，それぞれ，グラフの左のY座標と下
のX 座標，右のY2座標と上のX2座標，グラフ内部の相対的な位置，画面内の相
対的な位置を表しています．座標系を指定しないときはfirstの座標系，つま
り図のY軸が使われます．座標系を指定するときは，x,y座標を与えるときに，
<tt> graph x, screen y </tt> の様に，使う座標系を前に置きます．</p>

<p>簡単なテストをしてみましょう．各々の座標系の原点になる所に文字を
書いてみます．</p>

<pre class="sample">
gnuplot&gt; set label "(0,0) first"  at first  0, first  0
gnuplot&gt; set label "(0,0) graph"  at graph  0, graph  0
gnuplot&gt; set label "(0,0) screen" at screen 0, screen 0
</pre>

<img src="fig/sample4.4a.png" alt="fig/sample4.4a" align="left" width="400" height="300">
<p> 最初のラベル("first")は，図の中央付近にある軸の原点に置かれます．
プロットの数値と座標系が一致しているので，図に矢印やコメントを描き込む
ときに便利です．"graph"の原点は，枠線(border)の左下のコーナーになって
います．右上のコーナーがgraph座標系の(1,1)になります．図中の位置を相対
的に決定して与えたいときに使います．例えば，graph 0.5, graph 0.5 なら
常に枠の中央になります．"screen"は表示画面の左下で，一部画面外に出てし
まっています．画面の右上がscreenでの(1,1)です．プロットの大きさに関係
なく画面全体に対する相対的な位置を決めるのに使います．</p>
<br clear="all">

<p>firstの座標系で指示したラベルは，図のXY軸の数値が変わればそれに伴って
位置が変化します．その他のラベルの位置は，軸の数値で変わりません．</p>

<pre class="sample">
gnuplot&gt; set xrange [-10:4]
gnuplot&gt; set yrange [-10:4]
gnuplot&gt; replot
</pre>

<div align="center"><img src="fig/sample4.4b.png" alt="fig/sample4.4b" width="400" height="300"></div>


<p>図全体を右上にずらしてみましょう．図の原点を変えるには<tt> set
origin </tt> <i> x,y </i>を使います．このx,y座標は"screen"座標系で与え
ます．全体を20%づつ右上にずらすには，次のようにします．</p>

<pre class="sample">
gnuplot&gt; set origin 0.2,0.2
gnuplot&gt; replot
</pre>

<img src="fig/sample4.4c.png" alt="fig/sample4.4c" align="left" width="400" height="300">
<p>screenで与える原点は常に左下ですが，originを変えるとgraphの原点が移
動します．</p>
<br clear="all">


<div class="top"><a href="label2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
<h2><a name="4.5">図中に矢印を描き込みたい．</a></h2>

<p>図の中に説明のための矢印を描き込むことがよくあります．gnuplotでは，
<tt>set arrow </tt>を使って矢印や線分を作成します．一番簡単な例は，
<tt>set arrow from 1,2 to 2,4 </tt>の様な書き方で，(1,2)という座標から
(2,4)に向かう矢印が表示されます．この<a href="label2.html#4.4">座標</a>は，何も指
定しなければfirstの座標系になり，X軸Y軸の目盛に依存します．常に同じ位
置に矢印を置くには，<a href="label2.html#4.4">graphやscreen座標系</a>で座標を与え
ます．</p>

<p> arrowを定義するたびに，gnuplotはそれぞれの矢印に順番に番号をふって
いきます．最初に定義された矢印のタグが1，その次が2，という風になっており，
この番号は，後で矢印を再定義する場合や消去する場合に使われます．
このあたりの定義方法は，<tt>set label</tt>と全く同じです．</p>

<pre class="sample">
gnuplot&gt; set arrow from 0,0 to 1,1
gnuplot&gt; set arrow from 0,0 to 1,2
gnuplot&gt; set arrow from 0,0 to 1,3
</pre>

<p>この様に3つの矢印を定義すると，原点から(1,1)に向かう矢印が1番，
(1,2)に向かうのが2番になります．2番の矢印を消し，3番の矢印の終点を
(1,5)に変えるには次のようにします．</p>

<pre class="sample">
gnuplot&gt; set noarrow 2
gnuplot&gt; set arrow   3 to 1,5
</pre>

<p>最初の定義の時に，<tt> set arrow 1 </tt>のようにユーザが直接タグと
なる番号を与えることもできます．こちらの方法の方が間違いが少ないかもし
てません．定義した矢印は<tt>show arrow </tt>で確認することができます．
なお，<tt> nohead </tt>のキーワードを付けると，終点にく矢じりが描かれ
ず，単純な線分になります．また，<tt>lw (linewidth)</tt>や<tt>ls
(linestyle)</tt>のキーワードで，線分の太さや線種を変えることもできます．
</p>

<p>関数をプロットするときに，コメントを付けるために描き込む矢印の座標が
すぐには分かりにくい場合があります．関数が簡単なら，次のような方法が使えます．</p>

<p>まず，表示する関数を最初に定義します．ここではy=x**2とy=1-(1-x)**2
の2つのグラフを描いて，X=0.5での2つの関数の間の部分に矢印を入れる例を
示します．まず，2つの関数を定義します．</p>

<pre class="sample">
gnuplot&gt; f(x)=x*x
gnuplot&gt; g(x)=1-(1-x)*(1-x)
</pre>

<p>矢印はX=0.5での座標を計算すれば良いのですが，これを矢印の定義のときに行います．</p>

<pre class="sample">
gnuplot&gt; set arrow 1 from 0.5,f(0.5) to 0.5,g(0.5)
gnuplot&gt; plot f(x),g(x)
</pre>

<img src="fig/sample4.5.png" alt="fig/sample4.5" align="left" width="400" height="300">

<p>この方法では，<tt>set arrow</tt>を実行した時点で矢印の座標が計算さ
れるため，その後でf(x)やg(x)を変更しても矢印の座標は自動的に変わっては
くれません．関数を変更したら，もう一度矢印も定義し直す必要があります．</p>
<br clear="all">

<p>線分の両端に矢じりを付ける方法は無いようです．無理にやるなら，from
とtoをひっくり返した矢印を定義して，2つの矢印を重ね描きする方法でしょ
うか．．．</p>

<pre class="sample">
gnuplot&gt; set arrow 1 from 1,2 to   1,4
gnuplot&gt; set arrow 2 to   1,2 from 1,4
</pre>



<div class="top"><a href="label2.html#top"><img src="image/mark-up.png" alt="up"></a></div>
</td></tr></table>
<hr class="topsep">
</body>
</html>

